<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <title>Bathrooms NYC</title>
    <link href="Content/Style.css" rel="stylesheet" />
    <link rel="stylesheet" href="Content/flexboxgrid.min.css" type="text/css">
    <link href="Content/angular-material.min.css" rel="stylesheet" />
    <script src="Scripts/packages/angular/angular.min.js"></script>
    <script src="Scripts/packages/angular-animate/angular-animate.min.js"></script>
    <script src="Scripts/packages/angular-aria/angular-aria.min.js"></script>
    <script src="Scripts/packages/angular-messages/angular-messages.min.js"></script>
    <script src="Scripts/packages/angular-material/angular-material.min.js"></script>
    <script src="Scripts/packages/angular/ng-map.min.js"></script>
</head>
<body ng-app="BathroomsNYCApp" ng-cloak>
    <div ng-controller="progressController">
        <div class="shield" ng-show="shield()" ng-animate="'animate'"></div>
        <div id="progress" ng-show="progress()" class="loader" ng-animate="'animate'">
            <md-progress-linear md-mode="indeterminate"></md-progress-linear>
        </div>
    </div>
    <div ng-controller="markersController">
        <div map-lazy-load="https://maps.google.com/maps/api/js?key=AIzaSyBu9juBXdxKCdLOpsJSgKzcvrk-hudIaS4">
            <ul class="flex-container">
                <li class="flex-item-map">
                    <ng-map class="map" center="{{location.latitude}}, {{location.longitude}}" zoom="15">
                        <marker id="location" position="{{location.latitude}}, {{location.longitude}}" on-mouseup="markerMove()" draggable="true" icon="Content/img/location.png" ng-cloak />
                        <div ng-repeat="marker in markers">
                            <marker position="[{{marker.latitude}}, {{marker.longitude}}]" on-click="showWindow(event, marker)" ng-cloak />
                            <info-window id="info">
                                <div class="vertical-container" ng-non-bindable>
                                    <md-card>
                                        <img ng-src="{{activeMarker.image}}" class="md-card-image">
                                        <md-card-title>
                                            <md-card-title-text>
                                                <span class="md-headline">{{activeMarker.name}}</span>
                                                <span class="md-subhead">{{activeMarker.location}}</span>
                                            </md-card-title-text>
                                        </md-card-title>
                                        <md-card-content>
                                            <p>
                                                Open Year-Round: {{activeMarker.openYearRound}} <br>
                                                Handicap Access: {{activeMarker.handiap}} <br>
                                                Comments: {{activeMarker.comments}}
                                            </p>
                                        </md-card-content>
                                        <md-card-actions layout="row" layout-align="end center">
                                            rating: {{activeMarker.rating}}
                                            <md-button class="md-icon-button" ng-click="rateBathroom(activeMarker.id)" aria-label="Favorite">
                                                <md-icon md-svg-icon="Content/img/icons/favorite.svg"></md-icon>
                                            </md-button>
                                            <md-button class="md-icon-button" ng-click="getDirections()" aria-label="Share">
                                                <md-icon md-svg-icon="Content/img/icons/directions.svg"></md-icon>
                                            </md-button>
                                        </md-card-actions>
                                    </md-card>
                                </div>
                            </info-window>
                        </div>
                        <directions draggable="false"
                                    panel="directions-panel"
                                    travel-mode="WALKING"
                                    origin="{{location.latitude}}, {{location.longitude}}"
                                    destination="{{destination}}">
                        </directions>
                    </ng-map>
                </li>
                <li class="flex-item-directions">
                    <div id="directions-panel" />
                </li>
            </ul>
        </div>
    </div>

    <script src="Scripts/app.js"></script>
    <script src="Scripts/js/main.js"></script>
    <script src="Scripts/services/progressService.js"></script>
    <script src="Scripts/controllers/markersController.js"></script>
    <script src="Scripts/controllers/progressController.js"></script>
</body>
</html>
